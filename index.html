<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formular Statistica</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
</head>

<style>
    .container {
        padding: 10px 10px;
        text-align: center;
    }

    .header {
        padding: 20px 10px 40px 10px;
    }

    label {
        margin-top: 50px;
        font-size: 30px;
    }

    h1,
    h2 {
        margin-top: 50px;
    }


    hr {
        width: 50%;
        margin: 0 auto;
        height: 60px;
        border-width: 4px;
    }

    .underline {
        /* text-decoration: underline; */
        text-decoration: underline;
        font-style: italic;
    }

    button {
        margin-top: 40px;
    }
</style>

<body>
    <div class="container header">
        <h1 class="underline">Cum sportul & alimentatia influenteaza rezultatele academice?</h1>
    </div>

    <article>
        <div class="container">
            <form action="/" method="post" id="delayedForm"
                onsubmit="document.getElementById('submitButton').setAttribute('disabled', 'disabled'); window.setTimeout(function () { document.getElementById('delayedForm').submit(); }, 2000); return false">

                <div class="container">
                    <input placeholder="Nume" type="text" name="username" id="username" required>
                    <input placeholder="Email" type="email" name="email" id="email" required>
                </div>


                <div class="container">
                    <h2>Alimentație</h2>
                    <hr>
                </div>

                <label for="q1">1.În ce măsură consumi fructe și legume:</label>
                <select id="q1" name="q1name" required>
                    <option value="0">0-2 pe zi</option>
                    <option value="1">3-5 pe zi</option>
                    <option value="2">mai mult de 5 pe zi</option>
                </select>
                <label for="q2">2.Cantitatea de apă pe care o consumi zilnic este:</label>
                <select id="q2" name="q2name" required>
                    <option value="0">Între 0-1 litri</option>
                    <option value="1">Între 1-2 litri</option>
                    <option value="2">Mai mult de 2 litri</option>
                </select>
                <label for="q3">3.Ești atent la ingredientele produselor pe care le achiziționezi:</label>
                <select id="q3" name="q3name" required>
                    <option value="0">Foarte rar/Aproape niciodata</option>
                    <option value="1">Rar</option>
                    <option value="2">Ocazional</option>
                    <option value="3">Destul de des</option>
                    <option value="4">Foarte des/ Aproape întotdeauna</option>
                </select>
                <label for="q4">4.Consumi produse din gama “bio”:</label>
                <select id="q4" name="q4name" required>
                    <option value="0"> Foarte rar/Aproape niciodată </option>
                    <option value="1">Rar</option>
                    <option value="2">Ocazional</option>
                    <option value="3">Des</option>
                    <option value="4">Foarte des/Aproape întotdeauna</option>
                </select>
                <label for="q5">5.De câte ori consumi fast-food pe săptămână:</label>
                <select id="q5" name="q5name" required>
                    <option value="2">0-1 ori </option>
                    <option value="1">2-3 ori </option>
                    <option value="0"> de mai mult de 3 ori </option>
                </select>
                <label for="q6">6.Cât de des consumi alimente bogate în proteine( pește, ouă, produse lactate, nuci și
                    semințe):</label>
                <select id="q6" name="q6name" required>
                    <option value="0">Foarte rar/Aproape niciodată</option>
                    <option value="1">Rar</option>
                    <option value="2">Ocazional</option>
                    <option value="3">Des</option>
                    <option value="4">Foarte des</option>
                </select>
                <label for="q7">7.În ce măsură eviți consumul excesiv de zahăr și dulciuri?</label>
                <select id="q7" name="q7name" required>
                    <option value="0">Nu evit deloc, consum regulat</option>
                    <option value="1">Evit într-o mică măsură </option>
                    <option value="2">Imi controlez consumul în mod moderat</option>
                    <option value="3">Evit în mare măsură </option>
                    <option value="4">Evit complet</option>
                </select>
                <label for="q8">8.Cât de des alegi opțiuni sănătoase în afara casei(la restaurant, ieșiri în oraș etc.)?
                </label>
                <select id="q8" name="q8name" required>
                    <option value="0">Foarte rar/ Aproape niciodată</option>
                    <option value="1">Rar</option>
                    <option value="2">Ocazional</option>
                    <option value="3">Destul de des</option>
                    <option value="4">Foarte des</option>
                </select>
                <label for="q9">9.Cât de informat te consideri în privința alimentației?</label>
                <select id="q9" name="q9name" required>
                    <option value="0">Deloc/Foarte puțin informat</option>
                    <option value="1">Puțin informat</option>
                    <option value="2">Moderat de informat</option>
                    <option value="3">Destul de informat</option>
                    <option value="4">Foarte informat, mă informez constant</option>
                </select>
                <label for="q10">10.Cât de mulțumit esti cu privire la starea ta generală si nivelul de energie în urma
                    regimului tău alimentar?</label>
                <select id="q10" name="q10name" required>
                    <option value="0">Extrem de nemulțumit</option>
                    <option value="1">Nemulțumit</option>
                    <option value="2">Indiferent</option>
                    <option value="3">Mulțumit</option>
                    <option value="4">Extrem de multumit</option>
                </select>
                <label for="q11">11.Introduceți numărul de mese pe care le aveți într-o zi: </label>
                <select id="q11" name="q11name" required>
                    <option value="0">1</option>
                    <option value="1">2-3</option>
                    <option value="2">>3</option>
                </select>



                <div class="container">
                    <h2>Performanța Sportivă</h2>
                    <hr>
                </div>


                <label for="q12">1. Mergi la sala de fitness:</label>
                <select id="q12" name="q12name" required>
                    <option value="0">0-1 zile pe săptămână</option>
                    <option value="1">2-3 zile pe săptămână</option>
                    <option value="2">4+ zile pe săptămână</option>
                </select>
                <label for="q13">2. Cât de des faci exerciții acasă?</label>
                <select id="q13" name="q13name" required>
                    <option value="0">De 0-1 ori pe săptămână</option>
                    <option value="1">De 2-3 ori pe săptămână</option>
                    <option value="2">Mai mult de 4 ori pe săptămână</option>
                </select>
                <label for="q14">3. Practici vreun sport?</label>
                <select id="q14" name="q14name" required>
                    <option value="4">Da, practic</option>
                    <option value="0">Nu, nu practic</option>
                </select>
                <label for="q15">4. Câți pași faci în medie într-o zi?</label>
                <select id="q15" name="q15name" required>
                    <option value="0">Mai puțin de 5.000 pași</option>
                    <option value="1">Între 5.000-10.000 pași</option>
                    <option value="2">Peste 10.000 pași</option>
                </select>
                <label for="q16">5. În ce masură îți place să faci sport?</label>
                <select id="q16" name="q16name" required>
                    <option value="0">Deloc</option>
                    <option value="1">Puțin</option>
                    <option value="2">Moderat</option>
                    <option value="3">Destul de mult</option>
                    <option value="4">Foarte mult</option>
                </select>
                <label for="q17">6. Cât de variată este gama de exerciții pe care le practici?</label>
                <select id="q17" name="q17name" required>
                    <option value="0">Limitată</option>
                    <option value="1">Destul de limitată</option>
                    <option value="2">Destul de variată</option>
                    <option value="3">Variată</option>
                    <option value="4">Foarte variată</option>
                </select>
                <label for="q18">7. Cum te simți în ceea ce privește nivelul de fitness si starea de sănătate?</label>
                <select id="q18" name="q18name" required>
                    <option value="0">Foarte nemulțumit</option>
                    <option value="1">Nemulțumit</option>
                    <option value="2">Satisfăcător</option>
                    <option value="3">Mulțumit</option>
                    <option value="4">Foarte mulțumit</option>
                </select>

                <div class="container">
                    <h2>Performanța Academică</h2>
                    <hr>
                </div>


                <label for="q19">1. Care este nivelul de concentrare pe care l-ai simțit în ultimele 6 luni?</label>
                <select id="q19" name="q19name" required>
                    <option value="0">Foarte redus</option>
                    <option value="1">Redus</option>
                    <option value="2">Mediu</option>
                    <option value="3">Ridicat</option>
                    <option value="4">Foarte ridicat</option>
                </select>
                <label for="q20">2. Cât de bine ai reușit să îți gestionezi timpul și să te organizezi pentru a
                    îndeplini cerințele academice ale cursurilor?</label>
                <select id="q20" name="q20name" required>
                    <option value="0">Foarte slab</option>
                    <option value="1">Slab</option>
                    <option value="2">Acceptabil</option>
                    <option value="3">Bine</option>
                    <option value="4">Excelent</option>
                </select>
                <label for="q21">3. Cât de bine ai reușit să menții un echilibru între viața academică și cea sportivă
                    în semestrul precedent?</label>
                <select id="q21" name="q21name" required>
                    <option value="0">Foarte slab</option>
                    <option value="1">Slab</option>
                    <option value="2">Acceptabil</option>
                    <option value="3">Bine</option>
                    <option value="4">Excelent</option>
                </select>
                <label for="q22">4. Cât de mult crezi că activitățile sportive au contribuit la bunăstarea și
                    concentrarea ta academică?</label>
                <select id="q22" name="q22name" required>
                    <option value="0">Deloc</option>
                    <option value="1">Aproape deloc</option>
                    <option value="2">Suficient</option>
                    <option value="3">Mult</option>
                    <option value="4">Foarte mult</option>
                </select>
                <label for="q23">5. Cât de mult crezi că obiceiurile alimentare au contribuit la bunăstarea și
                    concentrarea ta academică?</label>
                <select id="q23" name="q23name" required>
                    <option value="0">Deloc</option>
                    <option value="1">Aproape deloc</option>
                    <option value="2">Suficient</option>
                    <option value="3">Mult</option>
                    <option value="4">Foarte mult</option>
                </select>
                <label for="q24">6. Cât de bine ai reușit să îți gestionezi stresul și să îți menții sănătatea mentală
                    în timpul perioadelor solicitante din semestrul trecut?</label>
                <select id="q24" name="q24name" required>
                    <option value="0">Foarte slab</option>
                    <option value="1">Slab</option>
                    <option value="2">Acceptabil</option>
                    <option value="3">Bine</option>
                    <option value="4">Excelent</option>
                </select>
                <label for="q25">7. Cum apreciezi progresele tale în materie de cunoștințe și competențe academice în
                    ultimele luni?</label>
                <select id="q25" name="q25name" required>
                    <option value="0">Lipsă de progrese</option>
                    <option value="1">Progrese limitate</option>
                    <option value="2">Progrese moderate</option>
                    <option value="3">Progrese bune</option>
                    <option value="4">Progrese excelente</option>
                </select>
                <label for="q26">8. Cât de mulțumit ești de notele obținute în cadrul cursurilor sau examenelor
                    recente?</label>
                <select id="q26" name="q26name" required>
                    <option value="0">Foarte nemulțumit</option>
                    <option value="1">Nemulțumit</option>
                    <option value="2">Satisfăcător</option>
                    <option value="3">Mulțumit</option>
                    <option value="4">Foarte mulțumit</option>
                </select>
                <label for="q27">9. Câte restanțe ai acumulat în cadrul semestrului anterior?</label>
                <select id="q27" name="q27name" required>
                    <option value="2">Niciuna</option>
                    <option value="1">O restanță</option>
                    <option value="0">Două sau mai multe restanțe</option>
                </select>
                <label for="q28">10. Care a fost media generala a semestrului anterior?</label>
                <select id="q28" name="q28name" required>
                    <option value="0">Mai puțin de 5</option>
                    <option value="1">5 - 7</option>
                    <option value="2">7 - 8.5</option>
                    <option value="3">8.5 - 10</option>
                </select>



                <button type="submit" id="submitButton">Trimite Formularul</button>
            </form>
        </div>
    </article>

    <button id="aaa">Add default Q Counter</button>
</body>


<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCSLkFUBTMTpsYhDdQnNmp_Z6fTuX-n-Pc",
        authDomain: "statistica-37759.firebaseapp.com",
        databaseURL: "https://statistica-37759-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "statistica-37759",
        storageBucket: "statistica-37759.appspot.com",
        messagingSenderId: "739551713354",
        appId: "1:739551713354:web:206319389bea7efb70aeb3"
    };

    const app = initializeApp(firebaseConfig);
    import { getDatabase, ref, child, get, set, update, remove } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-database.js"
    const db = getDatabase();

    let username = document.getElementById('username')
    let email = document.getElementById('email')

    let q1 = document.getElementById("q1");
    let q2 = document.getElementById("q2");
    let q3 = document.getElementById("q3");
    let q4 = document.getElementById("q4");
    let q5 = document.getElementById("q5");
    let q6 = document.getElementById("q6");
    let q7 = document.getElementById("q7");
    let q8 = document.getElementById("q8");
    let q9 = document.getElementById("q9");
    let q10 = document.getElementById("q10");
    let q11 = document.getElementById("q11");
    let q12 = document.getElementById("q12");
    let q13 = document.getElementById("q13");
    let q14 = document.getElementById("q14");
    let q15 = document.getElementById("q15");
    let q16 = document.getElementById("q16");
    let q17 = document.getElementById("q17");
    let q18 = document.getElementById("q18");
    let q19 = document.getElementById("q19");
    let q20 = document.getElementById("q20");
    let q21 = document.getElementById("q21");
    let q22 = document.getElementById("q22");
    let q23 = document.getElementById("q23");
    let q24 = document.getElementById("q24");
    let q25 = document.getElementById("q25");
    let q26 = document.getElementById("q26");
    let q27 = document.getElementById("q27");
    let q28 = document.getElementById("q28");



    let lvlAlim, lvlSport;

    function addValues() {
        let elements = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10', 'q11', 'q12', 'q13', 'q14', 'q15', 'q16', 'q17', 'q18', 'q19', 'q20', 'q21', 'q22', 'q23', 'q24', 'q25', 'q26', 'q27', 'q28'];

        lvlAlim = 0;
        lvlSport = 0;
        for (let i = 0; i < 28; i++) {

            let elementName = elements[i];
            let element = document.getElementById(elementName);
            let value;
            if (element) {
                value = element.value;
                if (i <= 11) {
                    lvlAlim += Number(value)
                } else if (i > 11 && i <= 18) {
                    lvlSport += Number(value)
                }
            }
            let questionRef = ref(db, 'QuestionsCounter/questions/' + elementName); // Reference to the 'q1' node
            get(questionRef).then((snapshot) => {
                let currentValues = snapshot.val()
                if (currentValues) {
                    currentValues[value] += 1;
                    set(questionRef, currentValues).then(() => {
                        console.log("Values incremented!");
                    }).catch((err) => {
                        console.log("Error updating values:", err);
                    });
                }
            })
        }


    }

    function addData1() {
        set(ref(db, 'QuestionsCounter/questions'), {
            q1: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q2: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q3: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q4: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q5: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q6: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q7: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q8: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q9: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q10: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q11: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q12: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q13: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q14: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q15: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q16: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q17: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q18: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q19: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q20: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q21: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q22: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q23: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q24: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q25: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q26: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q27: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },
            q28: {
                "0": 0,
                "1": 0,
                "2": 0,
                "3": 0,
                "4": 0,
            },

        })
    }
    document.getElementById("aaa").addEventListener("click", addData1);

    function addData() {


        setTimeout(() => {
            set(ref(db, 'StudentsSet/' + username.value), {
                username: username.value,
                email: email.value,
                lvlAlim: lvlAlim,
                lvlSport: lvlSport,
                q1: { answer: q1.options[q1.selectedIndex].text, value: q1.value },
                q2: { answer: q2.options[q2.selectedIndex].text, value: q2.value },
                q3: { answer: q3.options[q3.selectedIndex].text, value: q3.value },
                q4: { answer: q4.options[q4.selectedIndex].text, value: q4.value },
                q5: { answer: q5.options[q5.selectedIndex].text, value: q5.value },
                q6: { answer: q6.options[q6.selectedIndex].text, value: q6.value },
                q7: { answer: q7.options[q7.selectedIndex].text, value: q7.value },
                q8: { answer: q8.options[q8.selectedIndex].text, value: q8.value },
                q9: { answer: q9.options[q9.selectedIndex].text, value: q9.value },
                q10: { answer: q10.options[q10.selectedIndex].text, value: q10.value },
                q11: { answer: q11.options[q11.selectedIndex].text, value: q11.value },
                q12: { answer: q12.options[q12.selectedIndex].text, value: q12.value },
                q13: { answer: q13.options[q13.selectedIndex].text, value: q13.value },
                q14: { answer: q14.options[q14.selectedIndex].text, value: q14.value },
                q15: { answer: q15.options[q15.selectedIndex].text, value: q15.value },
                q16: { answer: q16.options[q16.selectedIndex].text, value: q16.value },
                q17: { answer: q17.options[q17.selectedIndex].text, value: q17.value },
                q18: { answer: q18.options[q18.selectedIndex].text, value: q18.value },
                q19: { answer: q19.options[q19.selectedIndex].text, value: q19.value },
                q20: { answer: q20.options[q20.selectedIndex].text, value: q20.value },
                q21: { answer: q21.options[q21.selectedIndex].text, value: q21.value },
                q22: { answer: q22.options[q22.selectedIndex].text, value: q22.value },
                q23: { answer: q23.options[q23.selectedIndex].text, value: q23.value },
                q24: { answer: q24.options[q24.selectedIndex].text, value: q24.value },
                q25: { answer: q25.options[q25.selectedIndex].text, value: q25.value },
                q26: { answer: q26.options[q26.selectedIndex].text, value: q26.value },
                q27: { answer: q27.options[q27.selectedIndex].text, value: q27.value },
                q28: { answer: q28.options[q28.selectedIndex].text, value: q28.value },
            }).then(() => {
                console.log("Added!");
            }).catch((err) => {
                console.log("Error");
            })
        }, 2000);



    }

    document.getElementById('submitButton').addEventListener('mousedown', () => {
        let nameInput = document.getElementById("username");
        if (nameInput.value.length != 0) {
            addValues();
            addData();
        }

    });

</script>

</html>